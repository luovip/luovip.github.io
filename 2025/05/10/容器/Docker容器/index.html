<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Docker容器 - Linux技术博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Linux技术博客"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Linux技术博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="1 Docker的概念与安装"><meta property="og:type" content="blog"><meta property="og:title" content="罗宇"><meta property="og:url" content="https://luovip.github.io/"><meta property="og:site_name" content="罗宇"><meta property="og:description" content="1 Docker的概念与安装"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://luovip.github.io/img/avatar.png"><meta property="article:published_time" content="2025-05-10T09:55:42.000Z"><meta property="article:modified_time" content="2025-05-12T07:25:10.708Z"><meta property="article:author" content="removeif"><meta property="article:tag" content="Docker容器"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://luovip.github.io/img/avatar.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2025/05/10/%E5%AE%B9%E5%99%A8/Docker%E5%AE%B9%E5%99%A8/"},"headline":"Linux技术博客","image":["http://example.com/img/docker.jpg"],"datePublished":"2025-05-10T09:55:42.000Z","dateModified":"2025-05-12T07:25:10.708Z","author":{"@type":"Person","name":"罗宇"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":"1 Docker的概念与安装"}</script><link rel="canonical" href="http://example.com/2025/05/10/%E5%AE%B9%E5%99%A8/Docker%E5%AE%B9%E5%99%A8/"><link rel="icon" href="/img/favicon.svg"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark-reasonable.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Linux技术博客</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">音乐</a><a class="navbar-item" href="/album">相册</a><a class="navbar-item" href="/about">关于我</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/img/docker.jpg" alt="Docker容器"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2025-05-10 17:55:42  <span class="level-item"> 罗宇 </span><a class="commentCountImg" href="/2025/05/10/%E5%AE%B9%E5%99%A8/Docker%E5%AE%B9%E5%99%A8/#comment-container"><span class="display-none-class">/2025/05/10/容器/Docker容器/</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="f20f732a72ade27e45c1d6f7617f151f">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>1 小时  <i class="fas fa-pencil-alt"> </i>8.5 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Docker容器</h1><div class="content"><h1 id="1-Docker的概念与安装"><a href="#1-Docker的概念与安装" class="headerlink" title="1 Docker的概念与安装"></a>1 Docker的概念与安装</h1><span id="more"></span>

<h2 id="1-1-Docker简介"><a href="#1-1-Docker简介" class="headerlink" title="1.1 Docker简介"></a>1.1 Docker简介</h2><p>&emsp;&emsp;Docker是开源的虚拟化容器引擎，开发者可以打包应用及依赖到一个可移植的容器中，然后发布到Linux环境中以实现虚拟化的管理</p>
<p>&emsp;&emsp;Linux环境包括CentOS、Redhat、Ubuntu等</p>
<p>&emsp;&emsp;Docker中的虚拟化容器完全使用“沙箱”机制，相互之间不会有任何接口，容器管理是逻辑隔离的</p>
<p>&emsp;&emsp;一个完整的Docker由以下几部分组成：</p>
<p>&emsp;&emsp;&emsp;1.Docker客户端、Docker守护进程(Daemon)、Docker镜像(image)、Docker容器(Container)、镜像仓库(Repository)</p>
<p>&emsp;&emsp;&emsp;2.Docker实现了应用代码与底层运行环境之间的耦合，可将一个复杂系统中的各个模块进行容器化，同时提供了负载均衡和失败迁移功能</p>
<p>&emsp;&emsp;&emsp;3.应用的容器化满足了敏捷开发、动态迁移、标准化的要求，提高了效率</p>
<h2 id="1-2-Docker的体系架构与概念"><a href="#1-2-Docker的体系架构与概念" class="headerlink" title="1.2 Docker的体系架构与概念"></a>1.2 Docker的体系架构与概念</h2><p>&emsp;&emsp;Docker是一个客户端服务器(C&#x2F;S)架构</p>
<p>&emsp;&emsp;Docker客户端和Docker守护进程交流，Docker守护进程是运行Docker的核心，如：构建、运行、分发Docker容器</p>
<p>&emsp;&emsp;Docker客户端和Docker守护进程可运行在同样的系统上，也可运行在不同的系统上</p>
<p>&emsp;&emsp;用户可以将一个Docker客户端连接到一个远程Docker守护进程中</p>
<p>&emsp;&emsp;Docker客户端和Docker守护进程通过sockets或RESTFul API进行沟通</p>
<p>&emsp;&emsp;使用Docker创建容器时需要有镜像，镜像是一个只读的模板，存放镜像的地方叫“镜像仓库”</p>
<p>&emsp;&emsp;镜像仓库分为：公有镜像仓库(如:官方提供的公有镜像仓库Docker Hub)、私有镜像仓库(如：Harbor)</p>
<p><img src="/images/docker%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84%E5%9B%BE.png" title="docker体系架构图"></p>
<p>Docker体系架构中的组成部分及功能特性：</p>
<table>
<thead>
<tr>
<th align="left">Docker客户端</th>
<th>Docker提供的命令行工具，是Docker最基本的用户接口</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Docker守护进程</td>
<td>在Docker宿主机上运行Docker，实际上运行的是Docker守护进程</td>
</tr>
<tr>
<td align="left">Docker镜像</td>
<td>Docker镜像是可读的模板，分为公有和私有</td>
</tr>
<tr>
<td align="left">Docker容器</td>
<td>Docker容器可看成是虚拟机</td>
</tr>
<tr>
<td align="left">镜像仓库</td>
<td>用于保存Docker镜像</td>
</tr>
</tbody></table>
<h2 id="1-3-Yum方式安装Docker"><a href="#1-3-Yum方式安装Docker" class="headerlink" title="1.3 Yum方式安装Docker"></a>1.3 Yum方式安装Docker</h2><p>&emsp;&emsp;利用Yum方式可以很方便的添加、删除和更新Linux系统的程序包，并且能自动解决包的依赖问题</p>
<p>&emsp;&emsp;使用Yum方式也能够方便的管理大量的系统更新问题</p>
<p> &emsp;&emsp;一般使用Yum方式需连接外部网络</p>
<p>1.安装docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装docker</span></span><br><span class="line">[root@master ~]# ping www.baidu.com</span><br><span class="line">[root@master ~]# yum -y install docker  <span class="comment"># 也可以指定具体版本   yum -y install docker-1.31.1</span></span><br></pre></td></tr></table></figure>

<p>2.启动Docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl start docker.service</span><br><span class="line">[root@master ~]# systemctl status docker.service</span><br></pre></td></tr></table></figure>

<p>3.确定Docker版本信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26</span><br><span class="line"> Package version: docker-1.13.1-210.git7d71120.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.10.3</span><br><span class="line"> Git commit:      7d71120/1.13.1</span><br><span class="line"> Built:           Wed Mar 20 16:04:34 2024</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26 (minimum version 1.12)</span><br><span class="line"> Package version: docker-1.13.1-210.git7d71120.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.10.3</span><br><span class="line"> Git commit:      7d71120/1.13.1</span><br><span class="line"> Built:           Wed Mar 20 16:04:34 2024</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"> Experimental:    <span class="literal">false</span></span><br><span class="line"> <span class="comment"># 从以上可看出，Docker分为Client端和Server端，当前安装的Docker是1.31.1版本</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-二进制包安装Docker"><a href="#1-4-二进制包安装Docker" class="headerlink" title="1.4 二进制包安装Docker"></a>1.4 二进制包安装Docker</h2><p>&emsp;&emsp;可使用Docker官方提供的二进制包进行Docker的离线安装</p>
<p>&emsp;&emsp;下载地址：<a target="_blank" rel="noopener" href="https://download.docker.com/linux/static/stable/x86_64/">https://download.docker.com/linux/static/stable/x86_64/</a></p>
<p>1.安装wget工具并下载Docker安装包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum -y install wget</span><br><span class="line">[root@master ~]# wget https://download.docker.com/linux/static/stable/x86_64/docker-28.0.4.tgz</span><br></pre></td></tr></table></figure>

<p>2.使用tar命令解压缩Docker二进制安装包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# file docker-28.0.4.tgz</span><br><span class="line">docker-28.0.4.tgz: gzip compressed data, from Unix</span><br><span class="line">[root@master ~]# tar -zxvf docker-28.0.4.tgz</span><br><span class="line">docker/</span><br><span class="line">docker/containerd-shim-runc-v2</span><br><span class="line">docker/containerd</span><br><span class="line">docker/docker</span><br><span class="line">docker/runc</span><br><span class="line">docker/ctr</span><br><span class="line">docker/dockerd</span><br><span class="line">docker/docker-init</span><br><span class="line">docker/docker-proxy</span><br></pre></td></tr></table></figure>

<p>3.查看Docker二进制包提供的执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">ls</span> docker</span><br><span class="line">containerd  containerd-shim-runc-v2  ctr  docker  dockerd  docker-init  docker-proxy  runc</span><br></pre></td></tr></table></figure>

<p>4.将Docker的可执行命令复制到“&#x2F;usr&#x2F;bin&#x2F;“目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cp</span> docker/* /usr/bin/</span><br><span class="line"><span class="built_in">cp</span>: overwrite ‘/usr/bin/containerd’? y</span><br><span class="line"><span class="built_in">cp</span>: overwrite ‘/usr/bin/containerd-shim-runc-v2’? y</span><br><span class="line"><span class="built_in">cp</span>: overwrite ‘/usr/bin/ctr’? y</span><br><span class="line">ycp: overwrite ‘/usr/bin/runc’? y</span><br></pre></td></tr></table></figure>

<p>5.执行以下命令启动Docker服务，启动成功后输出的日志信息如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# /usr/bin/dockerd</span><br><span class="line">INFO[2025-04-05T19:54:53.383490501+08:00] Starting up</span><br><span class="line">WARN[2025-04-05T19:54:53.385072958+08:00] could not change group /var/run/docker.sock to docker: group docker not found</span><br><span class="line">INFO[2025-04-05T19:54:53.385132079+08:00] containerd not running, starting managed containerd</span><br><span class="line">INFO[2025-04-05T19:54:53.405178539+08:00] started new containerd process                address=/var/run/docker/containerd/containerd.sock module=libcontainerd pid=10553</span><br><span class="line">INFO[2025-04-05T19:54:53.454987934+08:00] starting containerd                           revision=05044ec0a9a75232cad458027ca83437aae3f4da version=v1.7.27</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>6.执行以下语句查看Docker版本信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# /usr/bin/docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           28.0.4</span><br><span class="line"> API version:       1.48</span><br><span class="line"> Go version:        go1.23.7</span><br><span class="line"> Git commit:        b8034c0</span><br><span class="line"> Built:             Tue Mar 25 15:06:08 2025</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          28.0.4</span><br><span class="line">  API version:      1.48 (minimum version 1.24)</span><br><span class="line">  Go version:       go1.23.7</span><br><span class="line">  Git commit:       6430e49</span><br><span class="line">  Built:            Tue Mar 25 15:07:23 2025</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">false</span></span><br><span class="line"> containerd:</span><br><span class="line">  Version:          v1.7.27</span><br><span class="line">  GitCommit:        05044ec0a9a75232cad458027ca83437aae3f4da</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.2.6</span><br><span class="line">  GitCommit:        v1.2.6-0-ge89a299</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br><span class="line"><span class="comment"># 以上信息显示Docker的版本(客户端与服务端)为28.0.4</span></span><br></pre></td></tr></table></figure>

<p>7.将Docker运行在后台</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">nohup</span> /usr/bin/dockerd &gt; /tmp/docker.log 2&gt;&amp; 1 &amp;</span><br><span class="line">[1] 10831</span><br><span class="line"><span class="comment"># 以上命令除将Docker运行在后台外，还会保存Docker日志到“/tmp/docker.log&quot;文件中</span></span><br></pre></td></tr></table></figure>

<p>8.在“&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service“文件中输入以下内容:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/systemd/system/docker.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=Docker Application Container Engine</span><br><span class="line">Documentation=https://docs.docker.com</span><br><span class="line">After=network-online.target firewalld.service</span><br><span class="line">Wants=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line">ExecStart=/usr/bin/dockerd</span><br><span class="line">ExecReload=/bin/ki11 -S HUP $MAINPID</span><br><span class="line">LimitNOFILE=infinity</span><br><span class="line">LimitNPROC=infinity</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">Delegate=yes</span><br><span class="line">KillMode=process</span><br><span class="line">Restart=on-failure</span><br><span class="line">StartLimitBurst=3</span><br><span class="line">StartLimitInterval=60s</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>9.在创建“&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service“文件后，需要给该文件添加可执行权限:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">chmod</span> +x /etc/systemd/system/docker.service</span><br><span class="line">[root@master ~]# <span class="built_in">ls</span> -l /etc/systemd/system/docker.service</span><br><span class="line">-rwxr-xr-x 1 root root 440 Apr  5 12:33 /etc/systemd/system/docker.service</span><br></pre></td></tr></table></figure>

<p>10.启动Docker并设置Docker为开机自启模式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl start docker</span><br><span class="line">[root@master ~]# systemctl <span class="built_in">enable</span> docker</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /etc/systemd/system/docker.service.</span><br></pre></td></tr></table></figure>

<p>11.验证Docker环境</p>
<p>&emsp;&emsp;使用“docker info“命令可查看Docker运行状态的详细信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker info</span><br><span class="line">Client:</span><br><span class="line"> Version:    28.0.4</span><br><span class="line"> Context:    default</span><br><span class="line"> Debug Mode: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 0</span><br><span class="line">  Running: 0</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 1</span><br><span class="line"> Server Version: 28.0.4</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: xfs</span><br><span class="line">  Supports d_type: <span class="literal">true</span></span><br><span class="line">  Using metacopy: <span class="literal">false</span></span><br><span class="line">  Native Overlay Diff: <span class="literal">true</span></span><br><span class="line">  userxattr: <span class="literal">false</span></span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Cgroup Version: 1</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: <span class="built_in">local</span></span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file <span class="built_in">local</span> splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: io.containerd.runc.v2 runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 05044ec0a9a75232cad458027ca83437aae3f4da</span><br><span class="line"> runc version: v1.2.6-0-ge89a299</span><br><span class="line"> init version: de40ad0</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: <span class="built_in">builtin</span></span><br><span class="line"> Kernel Version: 3.10.0-957.el7.x86_64</span><br><span class="line"> Operating System: CentOS Linux 7 (Core)</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: x86_64</span><br><span class="line"> CPUs: 1</span><br><span class="line"> Total Memory: 1.934GiB</span><br><span class="line"> Name: master</span><br><span class="line"> ID: 054106da-23b5-44a3-9d78-93fd89f9bf68</span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br><span class="line"> Debug Mode: <span class="literal">false</span></span><br><span class="line"> Experimental: <span class="literal">false</span></span><br><span class="line"> Insecure Registries:</span><br><span class="line">  ::1/128</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Live Restore Enabled: <span class="literal">false</span></span><br><span class="line"> Product License: Community Engine</span><br><span class="line"><span class="comment"># 在Server端配置参数中，Registry表示仓库地址，这里默认使用官方提供的Docker Hub镜像仓库</span></span><br></pre></td></tr></table></figure>

<p>12.查看Docker服务状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl status docker</span><br><span class="line">● docker.service - Docker Application Container Engine</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/docker.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Sat 2025-04-05 14:29:43 CST; 38s ago</span><br><span class="line">     Docs: https://docs.docker.com</span><br><span class="line"> Main PID: 12314 (dockerd)</span><br><span class="line">    Tasks: 14</span><br><span class="line">   Memory: 33.7M</span><br><span class="line">   CGroup: /system.slice/docker.service</span><br><span class="line">           ├─12314 /usr/bin/dockerd</span><br><span class="line">           └─12319 containerd --config /var/run/docker/containerd/containerd.toml --log-level info</span><br></pre></td></tr></table></figure>

<h2 id="1-5-Docker部署第一个应用"><a href="#1-5-Docker部署第一个应用" class="headerlink" title="1.5 Docker部署第一个应用"></a>1.5 Docker部署第一个应用</h2><p>&emsp;&emsp;安装Docker后，可以通过镜像来创建容器，从而运行应用</p>
<p>&emsp;&emsp;在Docker中通过使用Nginx镜像部署第一个应用，并在浏览器访问</p>
<p>1.在镜像仓库中搜索Nginx镜像，其中，OFFICAL列中标有【OK】的镜像是Docker官方提供的镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker search nginx</span><br></pre></td></tr></table></figure>

<p>2.通过以下命令从镜像仓库拉取Nginx的镜像到本地</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">6e909acdb790: Pull complete</span><br><span class="line">5eaa34f5b9c2: Pull complete</span><br><span class="line">417c4bccf534: Pull complete</span><br><span class="line">e7e0ca015e55: Pull complete</span><br><span class="line">373fe654e984: Pull complete</span><br><span class="line">97f5c0f51d43: Pull complete</span><br><span class="line">c22eb46e871a: Pull complete</span><br><span class="line">Digest: sha256:124b44bfc9ccd1f3cedf4b592d4d1e8bddb78b51ec2ed5056c52d3692baebc19</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br></pre></td></tr></table></figure>

<p>3.使用“docker images”命令查看本地的镜像信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    53a18edff809   8 weeks ago   192MB</span><br></pre></td></tr></table></figure>

<p>4.执行以下命令将使用镜像来创建Nginx的容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d -p 8080:80 nginx</span><br><span class="line">ac35595599b9f236f3ea59aadd401cbdf0c8b85e57660282c73d615b1de2e1a3</span><br><span class="line"><span class="comment"># 参数说明:</span></span><br><span class="line">-d：启动容器的守护进程</span><br><span class="line">-p：将容器内的80端口映射到宿主机的8080端口，就可以通过宿主机访问容器内部</span><br></pre></td></tr></table></figure>

<p>5.查看Docker容器的信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS       NAMES          ac35595599b9   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   54 seconds ago   Up 53 seconds   0.0.0.0:8080-&gt;80/tcp, [::]:8080-&gt;80/tcp   vibrant_swanson</span><br></pre></td></tr></table></figure>

<p>6.打开浏览器访问：“<a target="_blank" rel="noopener" href="http://192.168.121.11:8080"将打开Nginx首页">http://192.168.121.11:8080&quot;将打开Nginx首页</a></p>
<p><img src="/images/%E8%AE%BF%E9%97%AEnginx.png" title="访问nginx"></p>
<p>7.终止和销毁容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker <span class="built_in">rm</span> -f ac35595599b9</span><br><span class="line">ac35595599b9</span><br><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br></pre></td></tr></table></figure>

<p>注明：可通过“docker help”命令查看命令的帮助信息</p>
<h1 id="2-Docker的镜像"><a href="#2-Docker的镜像" class="headerlink" title="2 Docker的镜像"></a>2 Docker的镜像</h1><h2 id="2-1-什么是Docker的镜像"><a href="#2-1-什么是Docker的镜像" class="headerlink" title="2.1 什么是Docker的镜像"></a>2.1 什么是Docker的镜像</h2><p>&emsp;&emsp;Docker镜像是一个模板，或者说其是一个只读文件，在该模板中包含应用和应用运行时所需要的依赖环境</p>
<p>&emsp;&emsp;Docker的镜像采用的是分层的文件系统，每一次对镜像的修改将以“读写层”的形式增加到原来的只读文件的模板上</p>
<p><img src="/images/Docker%E9%95%9C%E5%83%8F%E7%9A%84%E6%A6%82%E5%BF%B5.jpg" title="Docker镜像的概念"></p>
<p>&emsp;&emsp;Docker镜像的分层结构：</p>
<p>&emsp;&emsp;&emsp;1.内核：用来加载Linux的内核已启动Linux环境</p>
<p>&emsp;&emsp;&emsp;2.根镜像：可将其理解为操作系统</p>
<p>&emsp;&emsp;&emsp;3.在根镜像之上就是叠加的每一层应用，如图中的MySQL、Tomcat等</p>
<p>&emsp;&emsp;&emsp;4.在物理存储上，镜像的本质是磁盘上一系列文件的集合</p>
<p>&emsp;&emsp;Docker默认的镜像存储路径是“&#x2F;var&#x2F;lib&#x2F;docker”</p>
<h2 id="2-2-Docker镜像的存储路径"><a href="#2-2-Docker镜像的存储路径" class="headerlink" title="2.2 Docker镜像的存储路径"></a>2.2 Docker镜像的存储路径</h2><h3 id="2-2-1-Docker默认的镜像存储路径"><a href="#2-2-1-Docker默认的镜像存储路径" class="headerlink" title="2.2.1 Docker默认的镜像存储路径"></a>2.2.1 Docker默认的镜像存储路径</h3><p>&emsp;&emsp;执行以下语句可得知Docker镜像的存储路径，可看出在默认情况下，Docker将拉取的镜像存储在“&#x2F;var&#x2F;lib&#x2F;docker”目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker info|grep <span class="string">&quot;Docker Root Dir&quot;</span></span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;以之前拉取的Nginx镜像为例，通过以下步骤可得知该Nginx镜像的存储路径：</p>
<p>1.确定镜像的ID</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    53a18edff809   8 weeks ago   192MB</span><br></pre></td></tr></table></figure>

<p>2.切换到“&#x2F;var&#x2F;lib&#x2F;docker”目录下并查找镜像文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /var/lib/docker</span><br><span class="line">[root@master docker]# find . -name 53a18edff809*</span><br><span class="line">./image/overlay2/imagedb/content/sha256/53a18edff8091d5faff1e42b4d885bc5f0f897873b0b8f0ace236cd5930819b0</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-自定义Docker的镜像存储路径"><a href="#2-2-2-自定义Docker的镜像存储路径" class="headerlink" title="2.2.2 自定义Docker的镜像存储路径"></a>2.2.2 自定义Docker的镜像存储路径</h3><p>&emsp;&emsp;实际生产环境中，Docker默认的镜像存储路径不能满足磁盘空间大小的要求，需修改镜像的存储路径</p>
<p>1.在更改镜像存储目录之前，需要先停止Docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl stop docker</span><br></pre></td></tr></table></figure>

<p>2.创建新的镜像存储路径“&#x2F;data&#x2F;docker”，该路径用于保存Docker的镜像文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">mkdir</span> -p /data/docker</span><br><span class="line">[root@master ~]# <span class="built_in">cp</span> -a /var/lib/docker/* /data/docker/</span><br></pre></td></tr></table></figure>

<p>3.创建Docker守护进程配置文件并写入路径地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cd</span> /etc/docker</span><br><span class="line">[root@master docker]# vim daemon.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data-root&quot;</span>: <span class="string">&quot;/data/docker&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.重新加载Docker服务，并重启Docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl daemon-reload</span><br><span class="line">[root@master ~]# systemctl start docker</span><br></pre></td></tr></table></figure>

<p>5.查看Docker的镜像存储地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker info|grep <span class="string">&quot;Docker Root Dir&quot;</span></span><br><span class="line"> Docker Root Dir: /data/docker</span><br></pre></td></tr></table></figure>

<h2 id="2-3-配置Docker镜像加速器"><a href="#2-3-配置Docker镜像加速器" class="headerlink" title="2.3 配置Docker镜像加速器"></a>2.3 配置Docker镜像加速器</h2><p>&emsp;&emsp;国内访问Docker Hub是非常缓慢的，为了提高效率，可以在Docker引擎中配置国内的镜像加速器</p>
<p>&emsp;&emsp;Docker可配置的国内镜像加速器有很多，比如阿里云、网易蜂巢、DaoCloud、Docker中国区官方镜像加速器</p>
<p>&emsp;&emsp;配置镜像加速器：</p>
<p>1.找到可用的容器镜像加速器地址</p>
<p>2.修改&#x2F;etc&#x2F;docker&#x2F;daemon.json文件如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/docker/daemon.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://mirror.baidubce.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.m.daocloud.io&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://mirror.ccs.tencentyun.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.nju.edu.cn&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.mirrors.sjtug.sjtu.edu.cn&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://mirror.gcr.io&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.registry.cyou&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker-cf.registry.cyou&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://dockercf.jsdelivr.fyi&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.jsdelivr.fyi&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://dockertest.jsdelivr.fyi&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://mirror.aliyuncs.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://dockerproxy.com&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;data-root&quot;</span>: <span class="string">&quot;/data/docker&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.使用“docker info”命令确认加速器配置是否成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker info|grep <span class="string">&quot;Docker Root Dir&quot;</span></span><br><span class="line"> Docker Root Dir: /data/docker</span><br><span class="line">[root@master ~]# docker info</span><br><span class="line">......</span><br><span class="line">Experimental: <span class="literal">false</span></span><br><span class="line"> Insecure Registries:</span><br><span class="line">  ::1/128</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Registry Mirrors:</span><br><span class="line">  https://docker.mirrors.ustc.edu.cn/</span><br><span class="line">  https://mirror.baidubce.com/</span><br><span class="line">  https://docker.m.daocloud.io/</span><br><span class="line">  https://mirror.ccs.tencentyun.com/</span><br><span class="line">  https://docker.nju.edu.cn/</span><br><span class="line">  https://docker.mirrors.sjtug.sjtu.edu.cn/</span><br><span class="line">  https://mirror.gcr.io/</span><br><span class="line">  https://docker.registry.cyou/</span><br><span class="line">  https://docker-cf.registry.cyou/</span><br><span class="line">  https://dockercf.jsdelivr.fyi/</span><br><span class="line">  https://docker.jsdelivr.fyi/</span><br><span class="line">  https://dockertest.jsdelivr.fyi/</span><br><span class="line">  https://mirror.aliyuncs.com/</span><br><span class="line">  https://dockerproxy.com/</span><br><span class="line"> Live Restore Enabled: <span class="literal">false</span></span><br><span class="line"> Product License: Community Engine</span><br><span class="line"><span class="comment"># 参数Registry Mirrors被设置为可用的镜像加速器地址</span></span><br></pre></td></tr></table></figure>

<p>4.重新拉取某个镜像，如Tomcat，会发现速度快了很多</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker pull tomcat</span><br></pre></td></tr></table></figure>

<p>5.使用拉取的Tomcat镜像创建一个容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">tomcat       latest    88b0f1cee84c   4 weeks ago   519MB</span><br><span class="line">nginx        latest    53a18edff809   8 weeks ago   192MB</span><br><span class="line">[root@master ~]# docker run -d --name mytomcat -p 8080:8080 tomcat</span><br><span class="line">1184cb567337969d50c64852f90a7d0efedd5db1d908045e3922e8c50cb84a73</span><br></pre></td></tr></table></figure>

<p>6.通过浏览器访问“<a target="_blank" rel="noopener" href="http://192.168.121.11:8080/%E2%80%9D%E4%BC%9A%E8%BF%94%E5%9B%9E404%E9%94%99%E8%AF%AF%EF%BC%8C%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BA%E5%9C%A8Tomcat%E4%B8%AD%E6%B2%A1%E6%9C%89%E9%83%A8%E7%BD%B2%E4%BB%BB%E4%BD%95%E5%BA%94%E7%94%A8">http://192.168.121.11:8080/”会返回404错误，这是因为在Tomcat中没有部署任何应用</a></p>
<p><img src="/images/tomcat%E8%AE%BF%E9%97%AE%E6%8A%A5%E9%94%99.png" title="tomcat访问报错"></p>
<p>7.确定Tomcat容器ID，进入容器内部署一个简单的HTML网页</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS     NAMES           </span><br><span class="line">1184cb567337   tomcat    <span class="string">&quot;catalina.sh run&quot;</span>   4 minutes ago   Up 4 minutes   0.0.0.0:8080-&gt;8080/tcp, [::]:8080-&gt;8080/tcp   mytomcat</span><br><span class="line">[root@master ~]# docker <span class="built_in">exec</span> -it 1184cb567337 /bin/bash</span><br><span class="line">root@1184cb567337:/usr/local/tomcat# <span class="built_in">mkdir</span> webapps/mydemo</span><br><span class="line">root@1184cb567337:/usr/local/tomcat# <span class="built_in">echo</span> <span class="string">&quot;&lt;h1&gt;Hello Tomcat&lt;/h1&gt;&quot;</span> &gt; webapps/mydemo/index.html</span><br></pre></td></tr></table></figure>

<p>9.通过浏览器访问“<a target="_blank" rel="noopener" href="http://192.168.121.11:8080/mydemo/index.html%E2%80%9D%E5%8F%AF%E6%88%90%E5%8A%9F%E7%9C%8B%E5%88%B0%E6%B5%8B%E8%AF%95%E9%A1%B5%E9%9D%A2">http://192.168.121.11:8080/mydemo/index.html”可成功看到测试页面</a></p>
<p><img src="/images/Tomcat%E6%B5%8B%E8%AF%95%E9%A1%B5.png" title="Tomcat测试页"></p>
<h2 id="2-4-命令行管理Docker镜像"><a href="#2-4-命令行管理Docker镜像" class="headerlink" title="2.4 命令行管理Docker镜像"></a>2.4 命令行管理Docker镜像</h2><p>&emsp;&emsp;下列为与镜像相关的一些操作命令：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>docker search [IMAGE NAME]</td>
<td>在拉取镜像之前，可以通过该命令搜素符合的镜像</td>
</tr>
<tr>
<td>docker images</td>
<td>列出本机上的所有镜像，该命令行还可以使用通配符，以找到符合条件的一系列镜像</td>
</tr>
<tr>
<td>docker inspect [IMAGE NAME]&#x2F;[CONTAINER ID]</td>
<td>查看镜像或者容器的详细信息</td>
</tr>
<tr>
<td>docker pull [IMAGE NAME]</td>
<td>将镜像拉到本地。镜像名必须包含命名空间和仓库名。如果在一个仓库中存在多个镜像，则必须指定TAG，即指定版本的信息，否则使用默认的TAG“latest”</td>
</tr>
<tr>
<td>docker push [IMAGE NAME]</td>
<td>将本地的镜像上传到镜像仓库中</td>
</tr>
<tr>
<td>docker rmi [IMAGE NAME]&#x2F;[IMAGE ID]</td>
<td>将不需要的镜像副除。与移除容器的命令rm相比，删除镜像的命令多了一个i，i即image的意思。在翻除镜像时，需要注意两点:①如果要删除多个镜像，则需要使用空格将它们隔开;②可以使用参数-f强制删除镜像</td>
</tr>
</tbody></table>
<p>&emsp;&emsp;search和pull的本质区别：search是从官方的公有镜像仓库Docker Hub中搜索镜像、pull是从registry下载镜像</p>
<p>&emsp;&emsp;search：Search Docker Hub for images       </p>
<p>&emsp;&emsp;pull：Download an image from a registry</p>
<p>1.镜像仓库中搜索Flink的镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker search flink</span><br></pre></td></tr></table></figure>

<p>2.将Flink镜像拉取到本地</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker pull flink</span><br></pre></td></tr></table></figure>

<p>3.查看本地镜像信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">flink        latest    0af4683cfb05   2 weeks ago   881MB</span><br><span class="line">tomcat       latest    88b0f1cee84c   4 weeks ago   519MB</span><br><span class="line">nginx        latest    53a18edff809   8 weeks ago   192MB</span><br><span class="line">[root@master ~]# docker images f*</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">flink        latest    0af4683cfb05   2 weeks ago   881MB</span><br></pre></td></tr></table></figure>

<p>4.使用“docker inspect”命令查看Flink镜像的详细信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker inspect 0af4683cfb05</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;sha256:0af4683cfb052d7775bcde5999bc2e3ea7771037d5813c284d02c7355a69a01e&quot;</span>,</span><br><span class="line">        <span class="string">&quot;RepoTags&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;flink:latest&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;RepoDigests&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;flink@sha256:0272223b56a64f5c060f64a3c61a4a2a144d223925d7e3199687f38461183394&quot;</span></span><br><span class="line">        ],</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>5.删除Flink镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker rmi -f 0af4683cfb05</span><br><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">tomcat       latest    88b0f1cee84c   4 weeks ago   519MB</span><br><span class="line">nginx        latest    53a18edff809   8 weeks ago   192MB</span><br></pre></td></tr></table></figure>

<h2 id="2-5-搭建私有镜像仓库Harbor"><a href="#2-5-搭建私有镜像仓库Harbor" class="headerlink" title="2.5 搭建私有镜像仓库Harbor"></a>2.5 搭建私有镜像仓库Harbor</h2><p>&emsp;&emsp;Harbor是VMware公司开发并开源的企业级Docker镜像仓库管理项目，包括镜像的权限管理(RBAC)、目录访问(LDAP)、日志审核、管理页面、自我注册、镜像复制和中文支持等功能。</p>
<p>&emsp;&emsp;准备一台虚拟机作为运行Harbor的主机：</p>
<p><img src="/images/Harbor%E4%B8%BB%E6%9C%BA.png" title="Harbor主机"></p>
<h3 id="2-5-1-安装Docker和Docker-Compose"><a href="#2-5-1-安装Docker和Docker-Compose" class="headerlink" title="2.5.1 安装Docker和Docker Compose"></a>2.5.1 安装Docker和Docker Compose</h3><p>&emsp;&emsp;Docker Compose是Docker的服务编排工具，通过GitHub网站可查看Docker Compose的最新版本信息</p>
<p>1.在Harbor主机上关闭Linux防火墙和SELinux</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor ~]# systemctl stop firewalld.service</span><br><span class="line">[root@Harbor ~]# systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.</span><br><span class="line">Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</span><br><span class="line">[root@Harbor ~]# setenforce 0</span><br></pre></td></tr></table></figure>

<p>2.配置Harbor主机的主机名和IP地址映射，映射文件“&#x2F;etc&#x2F;hosts”加入如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor ~]# vim /etc/hosts</span><br><span class="line">192.168.121.10 my.harbor.com</span><br></pre></td></tr></table></figure>

<p>3.使用YUM源或二进制包安装Docker</p>
<p>4.启动Docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor ~]# systemctl start docker</span><br><span class="line">[root@Harbor ~]# systemctl <span class="built_in">enable</span> docker</span><br><span class="line">[root@Harbor ~]# systemctl status docker</span><br><span class="line">docker.service - Docker Application Container Engine</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/docker.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Sun 2025-04-06 11:43:00 CST; 1min 18s ago</span><br><span class="line">     Docs: https://docs.docker.com</span><br><span class="line"> Main PID: 8225 (dockerd)</span><br><span class="line">    Tasks: 15</span><br><span class="line">   Memory: 27.5M</span><br><span class="line">   CGroup: /system.slice/docker.service</span><br><span class="line">           ├─8225 /usr/bin/dockerd</span><br><span class="line">           └─8230 containerd --config /var/run/docker/containerd/containerd.toml</span><br></pre></td></tr></table></figure>

<p>5.以下指令将从GitHub下载服务编排工具Docker Compose，并保存到本地的“&#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose”文件中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor ~]# <span class="built_in">sudo</span> curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/v2.34.0/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>6.给Docker Compose加上可执行权限并确认版本信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor ~]# <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br><span class="line">[root@Harbor ~]# docker-compose version</span><br><span class="line">Docker Compose version v2.34.0</span><br></pre></td></tr></table></figure>

<h3 id="2-5-2-安装与配置Harbor"><a href="#2-5-2-安装与配置Harbor" class="headerlink" title="2.5.2 安装与配置Harbor"></a>2.5.2 安装与配置Harbor</h3><p>1.从GitHub下载Harbor安装文件，这里安装的是最新版本v2.12.2</p>
<p>2.将Harbor安装文件解压缩到“&#x2F;root&#x2F;training&#x2F;”目录下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor ~]# <span class="built_in">mkdir</span> /root/training</span><br><span class="line">[root@Harbor training]# ll</span><br><span class="line">total 632400</span><br><span class="line">-rw-r--r--. 1 root root 647577270 Apr  6 13:15 harbor-offline-installer-v2.12.2.tgz</span><br><span class="line">[root@Harbor training]# tar -zxvf harbor-offline-installer-v2.12.2.tgz -C /root/training/</span><br><span class="line">harbor/harbor.v2.12.2.tar.gz</span><br><span class="line">harbor/prepare</span><br><span class="line">harbor/LICENSE</span><br><span class="line">harbor/install.sh</span><br><span class="line">harbor/common.sh</span><br><span class="line">harbor/harbor.yml.tmpl</span><br></pre></td></tr></table></figure>

<p>3.进入“&#x2F;root&#x2F;training&#x2F;harbor”目录下，编辑Harbor的核心配置文件harbor.yml.tmpl</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装时harbor.yml.tmpl文件需重命名为harbor.yml</span></span><br><span class="line">[root@Harbor ~]# <span class="built_in">mv</span> harbor.yml.tmpl harbor.yml</span><br><span class="line"></span><br><span class="line"><span class="comment">#将Harbor监听地址设置为本机的主机名，并设置Harbor管理员的登录密码</span></span><br><span class="line">[root@Harbor training]# <span class="built_in">cd</span> harbor</span><br><span class="line">[root@Harbor harbor]# ll</span><br><span class="line">total 636496</span><br><span class="line">-rw-r--r--. 1 root root      3646 Jan 16 22:10 common.sh</span><br><span class="line">-rw-r--r--. 1 root root 651727378 Jan 16 22:11 harbor.v2.12.2.tar.gz</span><br><span class="line">-rw-r--r--. 1 root root     14288 Jan 16 22:10 harbor.yml.tmpl</span><br><span class="line">-rwxr-xr-x. 1 root root      1975 Jan 16 22:10 install.sh</span><br><span class="line">-rw-r--r--. 1 root root     11347 Jan 16 22:10 LICENSE</span><br><span class="line">-rwxr-xr-x. 1 root root      2211 Jan 16 22:10 prepare</span><br><span class="line">[root@Harbor harbor]# vim harbor.yml.tmpl</span><br><span class="line">hostname: 192.168.121.10             <span class="comment"># 监听地址</span></span><br><span class="line">http:</span><br><span class="line">  <span class="comment"># port for http, default is 80. If https enabled, this port will redirect to https port</span></span><br><span class="line">  port: 82          <span class="comment"># 端口</span></span><br><span class="line">harbor_admin_password: harbor123    <span class="comment"># 管理员登录密码</span></span><br><span class="line"><span class="comment"># 如果不启用https就注释掉12行-20行</span></span><br></pre></td></tr></table></figure>

<p>4.执行install命令安装Harbor</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor harbor]# ./install.sh</span><br><span class="line"></span><br><span class="line">[Step 0]: checking <span class="keyword">if</span> docker is installed ...</span><br><span class="line"></span><br><span class="line">Note: docker version: 28.0.4</span><br><span class="line"></span><br><span class="line">[Step 1]: checking docker-compose is installed ...</span><br><span class="line"></span><br><span class="line">Note: docker-compose version: 2.34.0</span><br><span class="line">...</span><br><span class="line">✔ ----Harbor has been installed and started successfully.----</span><br></pre></td></tr></table></figure>

<p>5.通过浏览器访问Harbor主页“<a target="_blank" rel="noopener" href="http://192.168.121.10:82/">http://192.168.121.10:82/</a>“     用户名&#x2F;密码:admin&#x2F;harbor</p>
<p>6.重启harbor</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@Harbor harbor]# docker-compose down</span><br><span class="line">[root@Harbor harbor]# ./prepare      <span class="comment"># 加载配置</span></span><br><span class="line">[root@Harbor harbor]# docker-compose up -d</span><br><span class="line">[root@Harbor harbor]# <span class="built_in">pwd</span></span><br><span class="line">/root/training/harbor</span><br></pre></td></tr></table></figure>

<h3 id="2-5-3-Docker中使用Harbor"><a href="#2-5-3-Docker中使用Harbor" class="headerlink" title="2.5.3 Docker中使用Harbor"></a>2.5.3 Docker中使用Harbor</h3><p>&emsp;&emsp;配置好私有镜像仓库Harbor后，需要在Docker的客户机上进行设置才能使用它，以master主机为例进行设置</p>
<p>1.将Harbor主机的主机名和IP地址写入Docker客户机的“&#x2F;etc&#x2F;hosts”文件中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/hosts</span><br><span class="line">192.168.121.10 my.harbor.com</span><br></pre></td></tr></table></figure>

<p>2.编辑文件“&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;docker.service”，输入以下内容。其中，my.harbor.com是Harbor主机的主机名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /usr/lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd --insecure-registry my.harbor.com</span><br></pre></td></tr></table></figure>

<p>3.编辑“&#x2F;etc&#x2F;docker&#x2F;daemon.json”文件，在该文件中指定私有镜像仓库地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# vim /etc/docker/daemon.json</span><br><span class="line"><span class="string">&quot;insecure-registries&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;192.168.121.10:82&quot;</span></span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

<p>4.重启Docker服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl daemon-reload</span><br><span class="line">[root@master ~]# systemctl restart docker.service</span><br></pre></td></tr></table></figure>

<p>5.使用”docker login“命令登录私有镜像仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker login 192.168.121.10:82</span><br><span class="line">Username: admin</span><br><span class="line"></span><br><span class="line">i Info → A Personal Access Token (PAT) can be used instead.</span><br><span class="line">         To create a PAT, visit https://app.docker.com/settings</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Password: harbor123</span><br><span class="line"></span><br><span class="line">WARNING! Your credentials are stored unencrypted <span class="keyword">in</span> <span class="string">&#x27;/root/.docker/config.json&#x27;</span>.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/go/credential-store/</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure>

<p>6.查看本地镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">tomcat_with_application   latest    441c59113ab0   30 seconds ago   519MB</span><br><span class="line">mynginx                   latest    1cbae74127df   17 hours ago     192MB</span><br><span class="line">tomcat                    latest    88b0f1cee84c   4 weeks ago      519MB</span><br><span class="line">nginx                     latest    53a18edff809   2 months ago     192MB</span><br></pre></td></tr></table></figure>

<p>7.将本地镜像格式转为harbor格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker tag tomcat_with_application:latest 192.168.121.10:82/my_images/tomcat_app:v1.0</span><br><span class="line"><span class="comment"># tomcat_with_application:latest为本地镜像名称和TAG值</span></span><br><span class="line"><span class="comment"># 192.168.121.10:82/my_images为harbor项目的路径</span></span><br><span class="line"><span class="comment"># tomcat_app:v1.0为上传到harbor后的命名及版本号，可随意指定</span></span><br></pre></td></tr></table></figure>

<p>8.查看格式转换后的镜像信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                               TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">192.168.121.10:82/my_images/tomcat_app   v1.0      441c59113ab0   2 minutes ago   519MB</span><br><span class="line">tomcat_with_application                  latest    441c59113ab0   2 minutes ago   519MB</span><br><span class="line">mynginx                                  latest    1cbae74127df   17 hours ago    192MB</span><br><span class="line">tomcat                                   latest    88b0f1cee84c   4 weeks ago     519MB</span><br><span class="line">nginx                                    latest    53a18edff809   2 months ago    192MB</span><br></pre></td></tr></table></figure>

<p>9.将镜像上传到私有镜像仓库harbor中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker push 192.168.121.10:82/my_images/tomcat_app:v1.0</span><br><span class="line">The push refers to repository [192.168.121.10:82/my_images/tomcat_app]</span><br><span class="line">ec8e96d9dea8: Pushed</span><br><span class="line">5f70bf18a086: Pushed</span><br><span class="line">6fbdf02a6a33: Pushed</span><br><span class="line">49cb1bc2daeb: Pushed</span><br><span class="line">4e5b554b7345: Pushed</span><br><span class="line">39cf0ac89a5a: Pushed</span><br><span class="line">f844dcf94898: Pushed</span><br><span class="line">3359bc3d7a6a: Pushed</span><br><span class="line">4b7c01ed0534: Pushed</span><br><span class="line">v1.0: digest: sha256:8a1fcd82fd3cc6aaeb6cc0e0bf45f3e4fdcb8236f70e87896c2d5794a2400c3b size: 2409</span><br></pre></td></tr></table></figure>

<p>10.在Harbor的Web主页查看已上传的镜像信息</p>
<p>11.删除特定tag的镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker rmi 192.168.121.10:82/my_images/tomcat_app:v1.0</span><br><span class="line">Untagged: 192.168.121.10:82/my_images/tomcat_app:v1.0</span><br><span class="line">Untagged: 192.168.121.10:82/my_images/tomcat_app@sha256:8a1fcd82fd3cc6aaeb6cc0e0bf45f3e4fdcb8236f70e87896c2d5794a2400c3b</span><br><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">tomcat_with_application   latest    441c59113ab0   25 minutes ago   519MB</span><br><span class="line">mynginx                   latest    1cbae74127df   18 hours ago     192MB</span><br><span class="line">tomcat                    latest    88b0f1cee84c   4 weeks ago      519MB</span><br><span class="line">nginx                     latest    53a18edff809   2 months ago     192MB</span><br></pre></td></tr></table></figure>

<h2 id="2-6-构建镜像"><a href="#2-6-构建镜像" class="headerlink" title="2.6 构建镜像"></a>2.6 构建镜像</h2><p>&emsp;&emsp;构建镜像有两种方式：</p>
<p>&emsp;&emsp;&emsp;1.使用“docker commit”命令构建镜像</p>
<p>&emsp;&emsp;&emsp;2.使用Dockerfile文件</p>
<h3 id="2-6-1-docker-commit构建镜像"><a href="#2-6-1-docker-commit构建镜像" class="headerlink" title="2.6.1 docker commit构建镜像"></a>2.6.1 docker commit构建镜像</h3><p>&emsp;&emsp;1.”docker commit“命令基于一个容器来创建镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker <span class="built_in">help</span> commit</span><br><span class="line">Usage:  docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">Create a new image from a container<span class="string">&#x27;s changes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Aliases:</span></span><br><span class="line"><span class="string">  docker container commit, docker commit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Options:</span></span><br><span class="line"><span class="string">  -a, --author string    Author (e.g., &quot;John Hannibal Smith &lt;hannibal@a-team.com&gt;&quot;)</span></span><br><span class="line"><span class="string">  -c, --change list      Apply Dockerfile instruction to the created image</span></span><br><span class="line"><span class="string">  -m, --message string   Commit message</span></span><br><span class="line"><span class="string">  -p, --pause            Pause container during commit (default true)</span></span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;之前已成功基于Tomcat的镜像创建了一个容器，并在容器中部署了一个web应用</p>
<p>&emsp;&emsp;使用”docker commit“命令基于已有的Tomcat镜像生成一个新的镜像文件：</p>
<p>1.使用”docker commit“命令基于该容器生成镜像，并将镜像保存到本地</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED        STATUS        PORTS        NAMES</span><br><span class="line">1184cb567337   tomcat    <span class="string">&quot;catalina.sh run&quot;</span>   11 hours ago   Up 11 hours   0.0.0.0:8080-&gt;8080/tcp, [::]:8080-&gt;8080/tcp   mytomcat</span><br><span class="line">[root@master ~]# docker commit 1184cb567337 tomcat_with_application</span><br><span class="line">sha256:f1c4e1291e66339a1abe0b3bcbc4035f9c8fa09db9e19cabb53d3e570b561b7f</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看本地镜像文件</span></span><br><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">tomcat_with_application   latest    f1c4e1291e66   32 seconds ago   519MB</span><br><span class="line">tomcat                    latest    88b0f1cee84c   4 weeks ago      519MB</span><br><span class="line">nginx                     latest    53a18edff809   8 weeks ago      192MB</span><br></pre></td></tr></table></figure>

<p>2.将生成镜像上传到镜像仓库中，只需要镜像名称前加上仓库的路径信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker commit f1c4e1291e66 collenzhao/tomcat_with_application</span><br></pre></td></tr></table></figure>

<p>3.登录Docker Hub，输入注册的用户名和密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker login</span><br></pre></td></tr></table></figure>

<h3 id="2-6-2-Dockerfile文件构建镜像"><a href="#2-6-2-Dockerfile文件构建镜像" class="headerlink" title="2.6.2 Dockerfile文件构建镜像"></a>2.6.2 Dockerfile文件构建镜像</h3><p>&emsp;&emsp;Docker镜像是一个特殊的分层文件系统，包含应用和必要的依赖环境，但不包含任何的动态信息</p>
<p>&emsp;&emsp;构建一个镜像，实际上就是为镜像中的每一层创建相应的配置。因此可以把构建的命令语句、参数配置等信息都写入一个脚本中</p>
<p>&emsp;&emsp;“docker commit”命令的无法重复的问题、镜像”臃肿“的问题就都被解决了，这个脚本就是Dockerfile文件</p>
<p>&emsp;&emsp;1.什么是Dockerfile</p>
<p>   &emsp;&emsp;&emsp;Dockerfile是一个文本文件，其包含了一条条的指令，每一条指令都用于构建镜像中的一层</p>
<p>   &emsp;&emsp;&emsp;Dockerfile文件可以用“docker build”命令进行编译，在编译过程中每一条指令的内容描述了该层应如何进行构建</p>
<p>   &emsp;&emsp;&emsp;当需要定制额外的需求时，只需要在Dockerfile文件的基础上添加或修改指令，重新生成新的镜像即可</p>
<p>&emsp;&emsp;2.通过实例演示如何使用Dockerfile文件，这个实例中将基于Nginx的镜像来构建一个镜像，并在该镜像中部署一个简单的Web网页</p>
<p>2.1 创建一个Dockerfile文件，在该文件中输入以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">touch</span> Dockerfile</span><br><span class="line">[root@master ~]# vim Dockerfile</span><br><span class="line">[root@master ~]# <span class="built_in">cat</span> Dockerfile</span><br><span class="line">FROM nginx</span><br><span class="line">RUN <span class="built_in">echo</span> <span class="string">&#x27;&lt;h1&gt;This is a Demo HTML&lt;/h1&gt;&#x27;</span> &gt; /usr/share/nginx/html/index.html</span><br></pre></td></tr></table></figure>

<p>2.2 在Dockerfile文件所在的目录下执行“docker build”命令构建镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker build -t mynginx .</span><br><span class="line">DEPRECATED: The legacy builder is deprecated and will be removed <span class="keyword">in</span> a future release.</span><br><span class="line">            Install the buildx component to build images with BuildKit:</span><br><span class="line">            https://docs.docker.com/go/buildx/</span><br><span class="line"></span><br><span class="line">Sending build context to Docker daemon  291.1MB</span><br><span class="line">Step 1/2 : FROM nginx</span><br><span class="line"> ---&gt; 53a18edff809</span><br><span class="line">Step 2/2 : RUN <span class="built_in">echo</span> <span class="string">&#x27;&lt;h1&gt;This is a Demo HTML&lt;/h1&gt;&#x27;</span> &gt; /usr/share/nginx/html/index.html</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 039d71bb5887</span><br><span class="line"> ---&gt; Removed intermediate container 039d71bb5887</span><br><span class="line"> ---&gt; 1cbae74127df</span><br><span class="line">Successfully built 1cbae74127df</span><br><span class="line">Successfully tagged mynginx:latest</span><br><span class="line"><span class="comment"># “docker build”命令会在当前目录下寻找名为“Dockerfile”的文件，然后对该文件进行编译生成镜像</span></span><br><span class="line"><span class="comment"># 如果文件名不是“Dockerfile”，则可以在使用“docker build”命令加上“-f”参数指定具体的文件名称</span></span><br></pre></td></tr></table></figure>

<p>2.3 查看新生成的镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">mynginx                   latest    1cbae74127df   4 minutes ago   192MB</span><br><span class="line">tomcat_with_application   latest    f1c4e1291e66   8 hours ago     519MB</span><br><span class="line">tomcat                    latest    88b0f1cee84c   4 weeks ago     519MB</span><br><span class="line">nginx                     latest    53a18edff809   8 weeks ago     192MB</span><br></pre></td></tr></table></figure>

<p>2.4 使用新生成的镜像创建容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d -p 7788:80 mynginx</span><br><span class="line">9a697b70d36e8ca12c5b77834befd585613045a6f2dd3698b0023ff90c58d783</span><br></pre></td></tr></table></figure>

<p>2.5 使用浏览器访问宿主机的7788端口</p>
<p><img src="/images/nginx_demo.png" title="nginx_demo"></p>
<h3 id="2-6-3-Dockerfile文件详解"><a href="#2-6-3-Dockerfile文件详解" class="headerlink" title="2.6.3 Dockerfile文件详解"></a>2.6.3 Dockerfile文件详解</h3><p>&emsp;&emsp;下图为Docker镜像、Docker容器、Dockerfile文件三者的关系，可看出：使用Dockerfile文件定义镜像，然后运行镜像启动容器</p>
<p><img src="/images/Dockerfile%E6%96%87%E4%BB%B6.jpg" title="Dockerfile文件"></p>
<p>完整的Dockerfile文件的组成部分：</p>
<table>
<thead>
<tr>
<th>组成部分</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>基础镜像信息</td>
<td>FROM关键字指定基础镜像信息，该命令必须是Dockerfile文件的第1条指令</td>
</tr>
<tr>
<td>维护者信息</td>
<td>MAINTAINER关键字指定，通常可使用Dockerfile文件创建者的姓名或电子邮件作为维护者信息</td>
</tr>
<tr>
<td>镜像操作指令</td>
<td>每执行一条镜像操作指令，将在镜像中添加新的一层，可根据需要使用一条或多条镜像操作指令。常见的镜像操作指令有：RUN、COPY、ADD、EXPOSE、WORKDIR、ONBUILD、USER、VOLUME等</td>
</tr>
<tr>
<td>容器启动执行指令</td>
<td>用于指定在启动容器时需要执行的命令，通过关键字CMD、ENTRYPOINT指定</td>
</tr>
</tbody></table>
<p>&emsp;&emsp;在完成Dockerfile文件的编写后执行“docker build”命令，则会根据Dockerfile文件中上下文的内容构建新的Docker镜像，整个构建过程会被递归处理，因此，如果在Dockerfile文件中含有子路径或URL等信息，则它们都将被递归构建</p>
<p>&emsp;&emsp;使用“docker build”命令构建镜像时，可通过-t参数指定生成镜像的仓库地址和标签等信息</p>
<p>&emsp;&emsp;“docker build”命令在使用Dockerfile文件生成镜像时，会通过Docker守护进程执行Dockerfile文件中的每一条指令，并在每一步执行完成后生成一个新镜像，当所有指令执行完成后，会输出最终镜像的ID</p>
<p>&emsp;&emsp;当镜像最终生成后，Docker守护进程会自动清理Docker的上下文环境，并自动重用已生成的中间镜像，以加速构建的速度</p>
<h1 id="3-Docker的容器"><a href="#3-Docker的容器" class="headerlink" title="3 Docker的容器"></a>3 Docker的容器</h1><p>&emsp;&emsp;Docker容器是轻量级的虚拟化方式，可以在“秒级”时间内快速启动和停止</p>
<p>&emsp;&emsp;Docker容器对系统资源(如：CPU、内存、I&#x2F;O带宽)的要求很低</p>
<p>&emsp;&emsp;除运行在容器中的应用外，Docker容器基本不会消耗其他的系统资源</p>
<h2 id="3-1-Docker容器的概念与操作"><a href="#3-1-Docker容器的概念与操作" class="headerlink" title="3.1 Docker容器的概念与操作"></a>3.1 Docker容器的概念与操作</h2><p>&emsp;&emsp;Docker的容器类似操作系统的文件夹，其中包含应用和应用运行时所需的依赖环境，每一个Docker容器都是从Docker镜像创建的</p>
<p>&emsp;&emsp;Docker容器的操作包括：创建容器、停止容器、进入容器、删除容器、导入和导出容器、查看容器等</p>
<p>1.使用“docker create”创建容器，基于nginx的镜像创建了一个容器，名字为“mycontainer”</p>
<p>&emsp;&emsp;通过“docker ps”命令无法看到创建的容器，因为此时容器还没启动，“docker ps -a”命令可查看所有容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">tomcat_with_application   latest    441c59113ab0   11 hours ago   519MB</span><br><span class="line">mynginx                   latest    1cbae74127df   28 hours ago   192MB</span><br><span class="line">tomcat                    latest    88b0f1cee84c   4 weeks ago    519MB</span><br><span class="line">nginx                     latest    53a18edff809   2 months ago   192MB</span><br><span class="line">[root@master ~]# docker create --name mycontainer nginx</span><br><span class="line">60eabaeaebaf9afd60d791b9aa2042a44d3b0f41a5125b17e9676861aa4a8e6e</span><br><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED        STATUS        PORTS  NAMES                        1184cb567337   tomcat    <span class="string">&quot;catalina.sh run&quot;</span>   47 hours ago   Up 11 hours   0.0.0.0:8080-&gt;8080/tcp, [::]:8080-&gt;8080/tcp   mytomcat</span><br><span class="line">[root@master ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS        PORTS     NAMES              60eabaeaebaf   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   2 minutes ago   Created               mycontainer          1184cb567337   tomcat    <span class="string">&quot;catalina.sh run&quot;</span>        47 hours ago    Up 11 hours   0.0.0.0:8080-&gt;8080/tcp, [::]:8080-&gt;8080/tcp   mytomcat</span><br><span class="line">[root@master ~]# docker <span class="built_in">rm</span> -f 1184cb567337</span><br><span class="line">1184cb567337</span><br></pre></td></tr></table></figure>

<p>2.使用“docker start”命令启动容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker start 60eabaeaebaf</span><br><span class="line">60eabaeaebaf</span><br><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES</span><br><span class="line">60eabaeaebaf   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   7 minutes ago   Up 4 seconds   80/tcp    mycontainer</span><br></pre></td></tr></table></figure>

<p>3.使用“docker run”命令可直接创建容器并启动容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d --name mycontailer_docker nginx</span><br><span class="line">fa3b2f9fa462163c9b053228777a3db40d04091d345adc7f945e0f257272b82e</span><br><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">fa3b2f9fa462   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   8 seconds ago    Up 8 seconds   80/tcp   mycontailer_docker</span><br><span class="line">60eabaeaebaf   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   16 minutes ago   Up 9 minutes   80/tcp   mycontainer</span><br></pre></td></tr></table></figure>

<p>4.使用“docker exec”命令可进入容器内，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker <span class="built_in">exec</span> -it mycontainer /bin/bash</span><br><span class="line">root@60eabaeaebaf:/#</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用容器ID进入容器内</span></span><br><span class="line">[root@master ~]# docker <span class="built_in">exec</span> -it 60eabaeaebaf /bin/bash</span><br><span class="line">root@60eabaeaebaf:/#</span><br><span class="line"><span class="comment"># 参数说明如下：</span></span><br><span class="line">-t：为Docker分配一个伪终端</span><br><span class="line">-i：为Docker打开标准输入</span><br></pre></td></tr></table></figure>

<p>5.当容器正在运行时，是不能直接将其删除的，但可使用-f参数强制删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">fa3b2f9fa462   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   6 minutes ago    Up 6 minutes    80/tcp mycontailer_docker</span><br><span class="line">60eabaeaebaf   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   23 minutes ago   Up 16 minutes   80/tcp mycontainer</span><br><span class="line">[root@master ~]# docker stop fa3b2f9fa462</span><br><span class="line">fa3b2f9fa462</span><br><span class="line">[root@master ~]# docker <span class="built_in">rm</span> fa3b2f9fa462</span><br><span class="line">fa3b2f9fa462</span><br><span class="line">[root@master ~]# docker <span class="built_in">rm</span> 60eabaeaebaf</span><br><span class="line">Error response from daemon: cannot remove container <span class="string">&quot;/mycontainer&quot;</span>: container is running: stop the container before removing or force remove</span><br><span class="line">[root@master ~]# docker <span class="built_in">rm</span> -f 60eabaeaebaf</span><br><span class="line">60eabaeaebaf</span><br><span class="line"><span class="comment"># 如果要一次性删除所有的容器，则执行以下命令:</span></span><br><span class="line">docker <span class="built_in">rm</span> -f$(docker ps -aq)</span><br></pre></td></tr></table></figure>

<p>6.可导出一个已经创建的容器到一个文件中</p>
<p>&emsp;&emsp;不管容器处于什么状态，都可以使用“docker export”命令进行导出，这种方式可实现容器的迁移</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d --name mycontailer nginx</span><br><span class="line">3b0398168b2f5429e2438438d995ec5685754e602d6fb9b6b2291ac81f027649</span><br><span class="line">[root@master ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES</span><br><span class="line">3b0398168b2f   nginx     <span class="string">&quot;/docker-entrypoint.…&quot;</span>   5 seconds ago   Up 5 seconds   80/tcp    mycontailer</span><br><span class="line">[root@master ~]# docker <span class="built_in">export</span> -o myexportcontainer.tar 3b0398168b2f</span><br><span class="line">[root@master ~]# <span class="built_in">ls</span></span><br><span class="line">anaconda-ks.cfg  docker  docker-28.0.4.tgz  Dockerfile  Dockerfile_1  myexportcontainer.tar</span><br><span class="line"><span class="comment"># 参数说明:</span></span><br><span class="line">myexportcontainer.tar：导出的容器文件</span><br><span class="line">3b0398168b2f：容器的ID</span><br></pre></td></tr></table></figure>

<p>7.从容器导出生成的文件，可使用“docker import”命令重新导入容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker import myexportcontainer.tar mynginx_imported</span><br><span class="line">sha256:59e61d42a39c19ea7f4435840cb510170dd5833fa6fd1c5511353a5fe10ee1d4</span><br><span class="line"><span class="comment"># mynginx_imported是一个镜像</span></span><br><span class="line">[root@master ~]# docker images</span><br><span class="line">REPOSITORY                TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">mynginx_imported          latest    59e61d42a39c   51 seconds ago   190MB</span><br><span class="line">tomcat_with_application   latest    441c59113ab0   11 hours ago     519MB</span><br><span class="line">mynginx                   latest    1cbae74127df   29 hours ago     192MB</span><br><span class="line">tomcat                    latest    88b0f1cee84c   4 weeks ago      519MB</span><br><span class="line">nginx                     latest    53a18edff809   2 months ago     192MB</span><br></pre></td></tr></table></figure>

<p>8.使用mynginx_imported镜像来创建一个容器，如果使用导入的镜像直接启动容器，需要在启动时跟上具体的命令，否则会报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d --name mycontailer_import mynginx_imported</span><br><span class="line">docker: Error response from daemon: no <span class="built_in">command</span> specified</span><br><span class="line"></span><br><span class="line">Run <span class="string">&#x27;docker run --help&#x27;</span> <span class="keyword">for</span> more information</span><br><span class="line">[root@master ~]# docker run -d --name mycontailer_import mynginx_imported /bin/bash</span><br><span class="line">88be4891fdea039b076a9856a8f4c3d627cdb4eb8f5da45d301d3a2b25b3c1fd</span><br><span class="line"><span class="comment"># 命令中的“/bin/bash”表示在启动容器时需要在容器中执行的指令</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2-Docker的日志"><a href="#3-2-Docker的日志" class="headerlink" title="3.2 Docker的日志"></a>3.2 Docker的日志</h2><p>&emsp;&emsp;Docker的日志分为两种类型：Docker引擎的日志、应用的日志</p>
<h3 id="3-2-1-访问Docker引擎的日志"><a href="#3-2-1-访问Docker引擎的日志" class="headerlink" title="3.2.1 访问Docker引擎的日志"></a>3.2.1 访问Docker引擎的日志</h3><p>&emsp;&emsp;Docker引擎的日志是指在Docker守护进程执行过程中产生的日志信息</p>
<p>&emsp;&emsp;如果Docker引擎出现了问题，需要在不同操作系统的宿主机上使用不同的方式进行查看</p>
<p>不同操作系统上Docker引擎日志的位置：</p>
<table>
<thead>
<tr>
<th>操作系统</th>
<th>日志的位置</th>
</tr>
</thead>
<tbody><tr>
<td>CentOS 7</td>
<td>journalctl -u docker.service</td>
</tr>
<tr>
<td>RHEL 7</td>
<td>journalctl -u docker.service</td>
</tr>
<tr>
<td>Ubuntu(16.04)</td>
<td>journalctl -u docker.service</td>
</tr>
<tr>
<td>Ubuntu(14.04)</td>
<td>&#x2F;var&#x2F;log&#x2F;upstart&#x2F;docker.log</td>
</tr>
<tr>
<td>OpenSuSE</td>
<td>journalctl -u docker.service</td>
</tr>
<tr>
<td>Boot2Docker</td>
<td>&#x2F;var&#x2F;log&#x2F;docker.log</td>
</tr>
</tbody></table>
<p>以master宿主机为例，操作系统是CentOS 7(64位)，查询Docker引擎日志如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# journalctl -u docker.service | more</span><br><span class="line">-- Logs begin at Sat 2025-04-05 14:42:38 CST, end at Mon 2025-04-07 23:01:01 CST. --</span><br><span class="line">Apr 05 14:42:45 master systemd[1]: Starting Docker Application Container Engine...</span><br><span class="line">Apr 05 14:42:45 master dockerd[6352]: <span class="keyword">time</span>=<span class="string">&quot;2025-04-05T14:42:45.921336503+08:00&quot;</span> level=info msg=<span class="string">&quot;Starting up&quot;</span></span><br><span class="line">Apr 05 14:42:45 master dockerd[6352]: <span class="keyword">time</span>=<span class="string">&quot;2025-04-05T14:42:45.929863373+08:00&quot;</span> level=warning msg=<span class="string">&quot;could not change group /var/run/docker.sock to doc</span></span><br><span class="line"><span class="string">ker: group docker not found&quot;</span></span><br><span class="line">Apr 05 14:42:45 master dockerd[6352]: <span class="keyword">time</span>=<span class="string">&quot;2025-04-05T14:42:45.949258599+08:00&quot;</span> level=info msg=<span class="string">&quot;libcontainerd: started new containerd process&quot;</span> pid=65</span><br><span class="line">44</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-访问Docker应用的日志"><a href="#3-2-2-访问Docker应用的日志" class="headerlink" title="3.2.2 访问Docker应用的日志"></a>3.2.2 访问Docker应用的日志</h3><p>&emsp;&emsp;Docker将应用运行在容器中，应用输出日志也就输出到容器中了，访问Docker应用的日志就变成了访问Docker容器的日志</p>
<p>&emsp;&emsp;要访问容器的日志，需要了解Docker的日志引擎</p>
<p>&emsp;&emsp;Docker支持的日志引擎如下：</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Docker容器</p><p><a href="http://example.com/2025/05/10/容器/Docker容器/">http://example.com/2025/05/10/容器/Docker容器/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="http://example.com"><p>罗宇</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2025-05-10 17:55:42</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-05-12 15:25:10</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2025/04/22/%E5%AE%B9%E5%99%A8/podman%E5%AE%B9%E5%99%A8/" target="_blank">podman容器</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2025/05/10/Kubernetes/Kubernetes%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%BF%90%E7%BB%B4/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Kubernetes企业级运维</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2025/05/10/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/Shell%E8%84%9A%E6%9C%AC/"><span class="level-item">Shell脚本</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#1-Docker的概念与安装"><span>1 Docker的概念与安装</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#1-1-Docker简介"><span>1.1 Docker简介</span></a></li><li><a class="is-flex is-mobile" href="#1-2-Docker的体系架构与概念"><span>1.2 Docker的体系架构与概念</span></a></li><li><a class="is-flex is-mobile" href="#1-3-Yum方式安装Docker"><span>1.3 Yum方式安装Docker</span></a></li><li><a class="is-flex is-mobile" href="#1-4-二进制包安装Docker"><span>1.4 二进制包安装Docker</span></a></li><li><a class="is-flex is-mobile" href="#1-5-Docker部署第一个应用"><span>1.5 Docker部署第一个应用</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#2-Docker的镜像"><span>2 Docker的镜像</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#2-1-什么是Docker的镜像"><span>2.1 什么是Docker的镜像</span></a></li><li><a class="is-flex is-mobile" href="#2-2-Docker镜像的存储路径"><span>2.2 Docker镜像的存储路径</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#2-2-1-Docker默认的镜像存储路径"><span>2.2.1 Docker默认的镜像存储路径</span></a></li><li><a class="is-flex is-mobile" href="#2-2-2-自定义Docker的镜像存储路径"><span>2.2.2 自定义Docker的镜像存储路径</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#2-3-配置Docker镜像加速器"><span>2.3 配置Docker镜像加速器</span></a></li><li><a class="is-flex is-mobile" href="#2-4-命令行管理Docker镜像"><span>2.4 命令行管理Docker镜像</span></a></li><li><a class="is-flex is-mobile" href="#2-5-搭建私有镜像仓库Harbor"><span>2.5 搭建私有镜像仓库Harbor</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#2-5-1-安装Docker和Docker-Compose"><span>2.5.1 安装Docker和Docker Compose</span></a></li><li><a class="is-flex is-mobile" href="#2-5-2-安装与配置Harbor"><span>2.5.2 安装与配置Harbor</span></a></li><li><a class="is-flex is-mobile" href="#2-5-3-Docker中使用Harbor"><span>2.5.3 Docker中使用Harbor</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#2-6-构建镜像"><span>2.6 构建镜像</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#2-6-1-docker-commit构建镜像"><span>2.6.1 docker commit构建镜像</span></a></li><li><a class="is-flex is-mobile" href="#2-6-2-Dockerfile文件构建镜像"><span>2.6.2 Dockerfile文件构建镜像</span></a></li><li><a class="is-flex is-mobile" href="#2-6-3-Dockerfile文件详解"><span>2.6.3 Dockerfile文件详解</span></a></li></ul></li></ul></li><li><a class="is-flex is-mobile" href="#3-Docker的容器"><span>3 Docker的容器</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#3-1-Docker容器的概念与操作"><span>3.1 Docker容器的概念与操作</span></a></li><li><a class="is-flex is-mobile" href="#3-2-Docker的日志"><span>3.2 Docker的日志</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#3-2-1-访问Docker引擎的日志"><span>3.2.1 访问Docker引擎的日志</span></a></li><li><a class="is-flex is-mobile" href="#3-2-2-访问Docker应用的日志"><span>3.2.2 访问Docker应用的日志</span></a></li></ul></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="罗宇"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">罗宇</p><p class="is-size-6 is-block">用开放的思维，解决封闭的问题</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国-四川-成都</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives/"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories/"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags/"><p class="title">13</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://luovip.github.io" target="_blank" rel="noopener">关注我</a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.linuxcenter.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">李晓辉的技术博客</span></span><span class="level-right"><span class="level-item tag">www.linuxcenter.cn</span></span></a></li><li><a class="level is-mobile" href="https://www.iloveimg.com/zh-cn/compress-image" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">图片压缩</span></span><span class="level-right"><span class="level-item tag">www.iloveimg.com</span></span></a></li><li><a class="level is-mobile" href="https://mirrors.nju.edu.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">南京大学镜像站</span></span><span class="level-right"><span class="level-item tag">mirrors.nju.edu.cn</span></span></a></li><li><a class="level is-mobile" href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">阿里云镜像站</span></span><span class="level-right"><span class="level-item tag">developer.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://docs.docker.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">docker官网</span></span><span class="level-right"><span class="level-item tag">docs.docker.com</span></span></a></li><li><a class="level is-mobile" href="https://hub.docker.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">docker官方仓库</span></span><span class="level-right"><span class="level-item tag">hub.docker.com</span></span></a></li><li><a class="level is-mobile" href="https://kubernetes.io/zh-cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">kubernetes官网</span></span><span class="level-right"><span class="level-item tag">kubernetes.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2025/05/12/CKA%E8%AE%A4%E8%AF%81/%E5%AE%B9%E5%99%A8&amp;K8S/"><img src="/img/docker&amp;k8s.jpg" alt="容器&amp;K8S"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-12T07:21:42.000Z">2025-05-12 15:21:42</time></p><p class="title"><a href="/2025/05/12/CKA%E8%AE%A4%E8%AF%81/%E5%AE%B9%E5%99%A8&amp;K8S/">容器&amp;K8S</a></p><p class="categories"><a href="/categories/CKA%E8%AE%A4%E8%AF%81/">CKA认证</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/05/11/Linux/Linux%E5%91%BD%E4%BB%A4/"><img src="/img/Linux.jpg" alt="Linux命令"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-11T14:36:42.000Z">2025-05-11 22:36:42</time></p><p class="title"><a href="/2025/05/11/Linux/Linux%E5%91%BD%E4%BB%A4/">Linux命令</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/05/10/Kubernetes/Kubernetes%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/"><img src="/img/K8S.jpg" alt="Kubernetes网络系统原理"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-10T11:29:42.000Z">2025-05-10 19:29:42</time></p><p class="title"><a href="/2025/05/10/Kubernetes/Kubernetes%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/">Kubernetes网络系统原理</a></p><p class="categories"><a href="/categories/Kubernetes/">Kubernetes</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/05/10/Kubernetes/Kubernetes%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%BF%90%E7%BB%B4/"><img src="/img/K8S.jpg" alt="Kubernetes企业级运维"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-10T11:28:42.000Z">2025-05-10 19:28:42</time></p><p class="title"><a href="/2025/05/10/Kubernetes/Kubernetes%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%BF%90%E7%BB%B4/">Kubernetes企业级运维</a></p><p class="categories"><a href="/categories/Kubernetes/">Kubernetes</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/05/10/%E5%AE%B9%E5%99%A8/Docker%E5%AE%B9%E5%99%A8/"><img src="/img/docker.jpg" alt="Docker容器"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-05-10T09:55:42.000Z">2025-05-10 17:55:42</time></p><p class="title"><a href="/2025/05/10/%E5%AE%B9%E5%99%A8/Docker%E5%AE%B9%E5%99%A8/">Docker容器</a></p><p class="categories"><a href="/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/">容器技术</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/CKA%E8%AE%A4%E8%AF%81/"><span class="level-start"><span class="level-item">CKA认证</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Kubernetes/"><span class="level-start"><span class="level-item">Kubernetes</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">容器技术</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/"><span class="level-start"><span class="level-item">自动化运维</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2025/05/"><span class="level-start"><span class="level-item">五月 2025</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2025/04/"><span class="level-start"><span class="level-item">四月 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Ansible%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><span class="tag">Ansible的基本使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CKA%E7%AC%94%E8%AE%B0/"><span class="tag">CKA笔记</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker%E5%AE%B9%E5%99%A8/"><span class="tag">Docker容器</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kubernetes%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%BF%90%E7%BB%B4/"><span class="tag">Kubernetes企业级运维</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kubernetes%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/"><span class="tag">Kubernetes网络系统原理</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux%E5%91%BD%E4%BB%A4/"><span class="tag">Linux命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><span class="tag">Linux的基本使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux%E7%9A%84%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/"><span class="tag">Linux的基础服务</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux%E8%BF%9B%E9%98%B6/"><span class="tag">Linux进阶</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">MySQL数据库</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell%E8%84%9A%E6%9C%AC/"><span class="tag">Shell脚本</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/podman%E5%AE%B9%E5%99%A8/"><span class="tag">podman容器</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%B9%E5%99%A8-K8S/"><span class="tag">容器&amp;K8S</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Linux技术博客</a><p class="size-small"><span>&copy; 2021-2025</span>  Powered by 罗宇 <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">川ICP备88888888号</a><br></span><span>© 版权说明:本网站所有内容均自己创作,方便用于技术交流和日常总结!<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2021/12/17 00:00:00')", 250,"");</script><br></span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(false){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('undefined','undefined','undefined','undefined',undefined);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>